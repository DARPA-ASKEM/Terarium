########################################################################################################################
# Database configuration
########################################################################################################################
spring.datasource.url=jdbc:postgresql://postgres.staging.terarium.ai:5432/terarium
spring.datasource.password=${terarium.db.password}
spring.datasource.username=${terarium.db.username}
spring.datasource.initialize=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.flyway.enabled=false

########################################################################################################################
# Elasticsearch configuration
########################################################################################################################
terarium.elasticsearch.url=https://elasticsearch.staging.terarium.ai:443
terarium.elasticsearch.index.prefix=tds
terarium.elasticsearch.index.suffix=tera_2.0
terarium.elasticsearch.index.artifact-root=artifact
terarium.elasticsearch.index.code-root=code
terarium.elasticsearch.index.document-root=document
terarium.elasticsearch.index.dataset-root=dataset
terarium.elasticsearch.index.equation-root=equation
terarium.elasticsearch.index.model-root=model
terarium.elasticsearch.index.model-configuration-root=modelconfiguration
terarium.elasticsearch.index.notebook-session-root=notebooksession
terarium.elasticsearch.index.simulation-root=simulation
terarium.elasticsearch.index.workflow-root=workflow
terarium.elasticsearch.index.decapodes-configuration-root=decapodesconfiguration
terarium.elasticsearch.index.decapodes-context-root=decapodescontext
management.health.elasticsearch.enabled=false

########################################################################################################################
# neo4j configuration
########################################################################################################################
management.health.neo4j.enabled=false

########################################################################################################################
# Flyway configuration
########################################################################################################################
spring.flyway.baseline-on-migrate=true

########################################################################################################################
# Request Logging
########################################################################################################################
logging.level.software.uncharted.terarium.hmiserver.proxy=DEBUG
spring.cloud.openfeign.client.config.default.logger-level=basic
spring.mvc.log-request-details=true

########################################################################################################################
# Caching
########################################################################################################################
terarium.caching.clearOnStartup=true
terarium.clientConfig.baseUrl=${terarium.baseUrl}
terarium.clientConfig.clientLogShippingEnabled=false
terarium.clientConfig.clientLogShippingIntervalMillis=3000

########################################################################################################################
# Keycloak Configuration
########################################################################################################################
terarium.keycloak.url=https://keycloak.staging.terarium.ai
terarium.keycloak.realm=Terarium
spring.security.oauth2.client.provider.keycloak.issuer-uri=${terarium.keycloak.url:localhost}/realms/${terarium.keycloak.realm:Terarium}
spring.security.oauth2.client.registration.keycloak.client-id=${terarium.keycloak.client-id:app}
spring.security.oauth2.resourceserver.jwt.issuer-uri=${terarium.keycloak.url:localhost}/realms/${terarium.keycloak.realm:Terarium}

########################################################################################################################
# application configuration
########################################################################################################################
terarium.baseUrl=http://localhost:8080
terarium.unauthenticated-url-patterns[0]=/configuration/keycloak
terarium.unauthenticated-url-patterns[1]=/actuator/health
terarium.unauthenticated-url-patterns[2]=/file
terarium.unauthenticated-url-patterns[3]=/actuator/prometheus
terarium.clientConfig.sseHeartbeatIntervalMillis=5000
terarium.serviceRequestPatterns[0]=/artifacts/**
terarium.serviceRequestPatterns[1]=/concepts/**
terarium.serviceRequestPatterns[2]=/datasets/**
terarium.serviceRequestPatterns[3]=/document-asset/**
terarium.serviceRequestPatterns[4]=/equations/**
terarium.serviceRequestPatterns[5]=/external/publications/**
terarium.serviceRequestPatterns[6]=/models/frameworks/**
terarium.serviceRequestPatterns[7]=/model-configurations/**
terarium.serviceRequestPatterns[8]=/models/**
terarium.serviceRequestPatterns[9]=/sessions/**
terarium.serviceRequestPatterns[10]=/projects/**
terarium.serviceRequestPatterns[11]=/provenance/**
terarium.serviceRequestPatterns[12]=/simulations/**
terarium.serviceRequestPatterns[13]=/code-asset/**
terarium.serviceRequestPatterns[14]=/workflows/**
terarium.extractionService.poolSize=10
management.endpoints.web.exposure.include=health,prometheus

########################################################################################################################
# Server configuration
########################################################################################################################
server.port=3000
server.http2.enabled=true
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.mapper.ACCEPT_CASE_INSENSITIVE_ENUMS=true

spring.servlet.multipart.max-file-size=4GB
spring.servlet.multipart.max-request-size=4GB

logging.level.org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver=ERROR
#swagger configuration
terarium.enable-swagger=true
terarium.swagger.server-url=https://server.staging.terarium.ai
springdoc.swagger-ui.oauth.clientId=${terarium.keycloak.client-id:app}
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.path=/swagger-ui

#File upload/download
spring.mvc.async.request-timeout=-1
#Pass error message in response
server.error.include-message=always
server.error.include-stacktrace=never


########################################################################################################################
# aws credentials configuration
########################################################################################################################
terarium.download-encryption-key=${download-encryption-key}
terarium.amazon.credentials.default.access-key=${aws-access-key-id}
terarium.amazon.credentials.default.secret-key=${aws-secret-access-key}
terarium.file-storage-s3-bucket-name=askem-staging-data-service
terarium.file-storage-s3-client-name=default
terarium.dataset-path=datasets
terarium.results-path=simulations
terarium.artifact-path=artifacts
terarium.document-path=documents
terarium.code-path=code
terarium.image-path=images
terarium.amazon.s3.default.region=us-east-1
terarium.amazon.s3.default.url=${aws-url}
terarium.amazon.s3.default.credentials-id=default

########################################################################################################################
# Microservice configurations
########################################################################################################################
github.url=https://api.github.com
jsdelivr.url=https://cdn.jsdelivr.net
mira-api.url=http://34.230.33.149:8771
mit-proxy.url=https://mit-tr.staging.terarium.ai
skema-py.url=https://skema-py.staging.terarium.ai
skema-rs.url=https://skema-rs.staging.terarium.ai
skema-unified.url=https://skema-unified.staging.terarium.ai
terarium.dataservice.url=https://data-service.staging.terarium.ai
xdd-dev-service.url=https://xdddev.chtc.io
xdd-prod-service.url=https://xdd.wisc.edu
cosmos-service.url=https://cosmos.staging.terarium.ai
funman-service.url=https://funman.staging.terarium.ai
simulation-service.url=https://sciml-service.staging.terarium.ai
ciemss-service.url=https://pyciemss.staging.terarium.ai
climate-data-service.url=https://climate-data.staging.terarium.ai

########################################################################################################################
# Beaker configuration
########################################################################################################################
tgpt.base.url=https://app.staging.terarium.ai/beaker/
tgpt.app.url=https://app.staging.terarium.ai/beaker/
tgpt.ws.url=wss://app.staging.terarium.ai/beaker_ws/

########################################################################################################################
# ReBAC Configuration
########################################################################################################################
spicedb.launchmode=TLS
spicedb.target=spicedb.staging.terarium.ai:443

########################################################################################################################
# RabbitMQ exchange
########################################################################################################################
spring.rabbitmq.addresses=amqps://b-1cb71505-9454-4d81-8ca0-a0ee6faf5770.mq.us-east-1.amazonaws.com:5671
spring.rabbitmq.username=${terarium.mq-username}
spring.rabbitmq.password=${terarium.mq-password}
terarium.client-user-event-queue=clientUserEventQueue
terarium.client-all-user-event-queue=clientAllUsersEventQueue
terarium.sciml-queue=scimlQueue
terarium.simulation-status=simulation-status

########################################################################################################################
# neo4j configuration
########################################################################################################################
spring.neo4j.uri=bolt://graphdb.staging.terarium.ai:7687
spring.neo4j.authentication.username=${neo4j-username}
spring.neo4j.authentication.password=${neo4j-password}

########################################################################################################################
# TaskRunner
########################################################################################################################
terarium.taskrunner.request-queue=terarium-request-queue
terarium.taskrunner.response-exchange=terarium-response-exchange
terarium.taskrunner.response-queue=terarium-response-queue
terarium.taskrunner.response-broadcast-exchange=terarium-response-broadcast-exchange
terarium.taskrunner.cancellation-exchange=terarium-cancellation-exchange
terarium.taskrunner.durable-queues=true

########################################################################################################################
# Logging
########################################################################################################################
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%level] %msg [%c:%L]%n
# logging.level.org.springframework.web=DEBUG

########################################################################################################################
# Cache Logging
########################################################################################################################
#logging.level.org.springframework.cache=TRACE

########################################################################################################################
# Hibernate Logging - WARNING - very verbose
########################################################################################################################
#spring.jpa.properties.hibernate.format_sql=true
#logging.level.org.hibernate=info
#logging.level.org.hibernate.SQL=debug
#logging.level.org.hibernate.orm.jdbc.bind=trace
#logging.level.org.hibernate.stat=debug
#logging.level.org.hibernate.SQL_SLOW=info
#logging.level.org.hibernate.cache=debug

########################################################################################################################
# Feign Client Configuration
########################################################################################################################
spring.cloud.openfeign.client.config.default.readTimeout=300000
spring.cloud.openfeign.client.config.default.connect-timeout=10000
