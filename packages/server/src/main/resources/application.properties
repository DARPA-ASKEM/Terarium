########################################################################################################################
# Database configuration
########################################################################################################################
spring.datasource.url=jdbc:postgresql://10.64.22.49:5432/terarium
spring.datasource.password=${terarium.db.password}
spring.datasource.username=${terarium.db.username}
spring.datasource.initialize=false
spring.jpa.hibernate.ddl-auto=none
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.flyway.enabled=false
spring.datasource.hikari.maximum-pool-size=64

########################################################################################################################
# Elasticsearch configuration
########################################################################################################################
terarium.elasticsearch.url=https://elasticsearch.dev.terarium.ai
terarium.elasticsearch.auth-enabled=true
terarium.elasticsearch.username=${es-username}
terarium.elasticsearch.password=${es-password}
terarium.elasticsearch.index.prefix=tds
terarium.elasticsearch.index.suffix=tera_2.0
terarium.elasticsearch.index.project-root=project
terarium.elasticsearch.index.artifact-root=artifact
terarium.elasticsearch.index.code-root=code
terarium.elasticsearch.index.document-root=document
terarium.elasticsearch.index.dataset-root=dataset
terarium.elasticsearch.index.equation-root=equation
terarium.elasticsearch.index.model-root=model
terarium.elasticsearch.index.model-configuration-root=modelconfiguration
terarium.elasticsearch.index.notebook-session-root=notebooksession
terarium.elasticsearch.index.simulation-root=simulation
terarium.elasticsearch.index.workflow-root=workflow
management.health.elasticsearch.enabled=false

########################################################################################################################
# Flyway configuration
########################################################################################################################
spring.flyway.baseline-on-migrate=true

########################################################################################################################
# Request Logging
########################################################################################################################
logging.level.software.uncharted.terarium.hmiserver.proxy=DEBUG
spring.cloud.openfeign.client.config.default.logger-level=basic
spring.mvc.log-request-details=true

########################################################################################################################
# Caching
########################################################################################################################
terarium.caching.clearOnStartup=true
terarium.clientConfig.baseUrl=${terarium.baseUrl}
terarium.clientConfig.clientLogShippingEnabled=false
terarium.clientConfig.clientLogShippingIntervalMillis=3000

########################################################################################################################
# Keycloak configuration
########################################################################################################################
terarium.keycloak.url=https://keycloak.dev.terarium.ai
terarium.keycloak.realm=terarium
spring.security.oauth2.client.provider.keycloak.issuer-uri=${terarium.keycloak.url:localhost}/realms/${terarium.keycloak.realm:Terarium}
spring.security.oauth2.client.registration.keycloak.client-id=${terarium.keycloak.client-id:app}
spring.security.oauth2.resourceserver.jwt.issuer-uri=${terarium.keycloak.url:localhost}/realms/${terarium.keycloak.realm:Terarium}

terarium.keycloak.api-service-name=api-service
terarium.keycloak.admin-api-service-name=admin-api-service

########################################################################################################################
# Application configuration
########################################################################################################################
terarium.baseUrl=http://localhost:8080
terarium.unauthenticated-url-patterns[0]=/configuration/keycloak
terarium.unauthenticated-url-patterns[1]=/actuator/health
terarium.unauthenticated-url-patterns[2]=/actuator/health/liveness
terarium.unauthenticated-url-patterns[3]=/actuator/health/readiness
terarium.unauthenticated-url-patterns[4]=/actuator/prometheus
terarium.unauthenticated-url-patterns[5]=/file
terarium.clientConfig.sseHeartbeatIntervalMillis=5000
terarium.serviceRequestPatterns[0]=/artifacts/**
terarium.serviceRequestPatterns[1]=/concepts/**
terarium.serviceRequestPatterns[2]=/datasets/**
terarium.serviceRequestPatterns[3]=/document-asset/**
terarium.serviceRequestPatterns[4]=/equations/**
terarium.serviceRequestPatterns[5]=/model-configurations/**
terarium.serviceRequestPatterns[6]=/models/**
terarium.serviceRequestPatterns[7]=/sessions/**
terarium.serviceRequestPatterns[8]=/projects/**
terarium.serviceRequestPatterns[9]=/provenance/**
terarium.serviceRequestPatterns[10]=/simulations/**
terarium.serviceRequestPatterns[11]=/code-asset/**
terarium.serviceRequestPatterns[12]=/workflows/**
terarium.serviceRequestPatterns[13]=/interventions/**
terarium.serviceRequestPatterns[14]=/knowledge/**
terarium.extractionService.poolSize=10
terarium.cacheHeadersMaxAge=86400
management.endpoints.web.exposure.include=health,prometheus
management.endpoint.health.probes.enabled=true

########################################################################################################################
# Server configuration
########################################################################################################################
server.port=3000
server.http2.enabled=true
spring.jackson.default-property-inclusion=NON_NULL
spring.jackson.mapper.ACCEPT_CASE_INSENSITIVE_ENUMS=true

spring.servlet.multipart.max-file-size=4GB
spring.servlet.multipart.max-request-size=4GB

logging.level.org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver=ERROR

#swagger configuration
terarium.enable-swagger=true
terarium.swagger.server-url=https://server.dev.terarium.ai
springdoc.swagger-ui.oauth.clientId=${terarium.keycloak.client-id:app}
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.path=/swagger-ui

#File upload/download
spring.mvc.async.request-timeout=-1

#Pass error message in response
server.error.include-message=always
server.error.include-stacktrace=never

########################################################################################################################
# AWS credentials configuration
########################################################################################################################
aws-url=http://s3.t1.uncharted.software
terarium.download-encryption-key=${download-encryption-key}
terarium.amazon.credentials.default.access-key=${aws-access-key-id}
terarium.amazon.credentials.default.secret-key=${aws-secret-access-key}
terarium.file-storage-s3-bucket-name=askem-dev-data-service
terarium.file-storage-s3-client-name=default
terarium.dataset-path=datasets
terarium.results-path=simulations
terarium.artifact-path=artifacts
terarium.document-path=documents
terarium.code-path=code
terarium.image-path=images
terarium.amazon.s3.default.region=us-east-1
terarium.amazon.s3.default.url=${aws-url}
terarium.amazon.s3.default.credentials-id=default

########################################################################################################################
# Microservice configuration
########################################################################################################################
github.url=https://api.github.com
jsdelivr.url=https://cdn.jsdelivr.net
mira-api.url=http://mira-epi-dkg-lb-c7b58edea41524e6.elb.us-east-1.amazonaws.com
mit-proxy.url=https://mit-tr.staging.terarium.ai
skema-py.url=https://skema-py.staging.terarium.ai
skema-rs.url=https://skema-rs.staging.terarium.ai
skema-unified.url=https://skema-unified.staging.terarium.ai
cosmos-service.url=https://cosmos.staging.terarium.ai
ciemss-service.url=https://pyciemss.staging.terarium.ai
climate-data-service.url=https://climate-data.staging.terarium.ai
xdd-prod-service.url=https://xdd.wisc.edu
########################################################################################################################
# Beaker configuration
########################################################################################################################
tgpt.base.url=https://app.dev.terarium.ai/beaker/
tgpt.app.url=https://app.dev.terarium.ai/beaker/
tgpt.ws.url=wss://app.dev.terarium.ai/beaker_ws/

########################################################################################################################
# ReBAC configuration
########################################################################################################################
spicedb.launchmode=TLS
spicedb.target=spicedb.dev.terarium.ai:443

########################################################################################################################
# RabbitMQ configuration
########################################################################################################################
spring.rabbitmq.addresses=amqp://rabbitmq.dev.terarium.ai:5672
spring.rabbitmq.username=${terarium.mq-username}
spring.rabbitmq.password=${terarium.mq-password}
terarium.simulation-status=simulation-status
terarium.simulation.pyciemss-broadcast-exchange=pyciemss-broadcast-exchange

########################################################################################################################
# Neo4j configuration
########################################################################################################################
management.health.neo4j.enabled=false
spring.neo4j.uri=bolt://graphdb.dev.terarium.ai:7687
spring.neo4j.authentication.username=${neo4j-username}
spring.neo4j.authentication.password=${neo4j-password}

########################################################################################################################
# Redis configuration
########################################################################################################################
spring.data.redis.url=https://redis.dev.terarium.ai

########################################################################################################################
# TaskRunner configuration
########################################################################################################################
terarium.taskrunner.request-queue=terarium-request-queue
terarium.taskrunner.response-exchange=terarium-response-exchange
terarium.taskrunner.response-queue=terarium-response-queue
terarium.taskrunner.response-broadcast-exchange=terarium-response-broadcast-exchange
terarium.taskrunner.cancellation-exchange=terarium-cancellation-exchange
terarium.taskrunner.durable-queues=true
terarium.taskrunner.rabbitmq.default.addresses=amqp://rabbitmq.dev.terarium.ai:5672
terarium.taskrunner.rabbitmq.default.username=${terarium.mq-username}
terarium.taskrunner.rabbitmq.default.password=${terarium.mq-password}

########################################################################################################################
# Taskrunner Equation Extraction impls
########################################################################################################################
terarium.taskrunner.equation_extraction.gpu-endpoint=

########################################################################################################################
# Logging
########################################################################################################################
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%level] %msg [%c:%L]%n
# logging.level.org.springframework.web=DEBUG

########################################################################################################################
# Cache Logging
########################################################################################################################
#logging.level.org.springframework.cache=TRACE

########################################################################################################################
# Hibernate Logging
########################################################################################################################
#spring.jpa.properties.hibernate.format_sql=true
#logging.level.org.hibernate=info
#logging.level.org.hibernate.SQL=debug
#logging.level.org.hibernate.orm.jdbc.bind=trace
#logging.level.org.hibernate.stat=debug
#logging.level.org.hibernate.SQL_SLOW=info
#logging.level.org.hibernate.cache=debug

########################################################################################################################
# Hypersistence configuration
########################################################################################################################
hypersistence.utils.jackson.object.mapper=software.uncharted.terarium.hmiserver.utils.HypersistenceObjectMapperSupplier
hypersistence.utils.json.serializer=software.uncharted.terarium.hmiserver.utils.HypersistenceJsonSerializerSupplier

########################################################################################################################
# Feign client configuration
########################################################################################################################
spring.cloud.openfeign.client.config.default.readTimeout=300000
spring.cloud.openfeign.client.config.default.connect-timeout=10000
